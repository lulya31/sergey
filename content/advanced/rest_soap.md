+++
title = "Rest & Soap & grpc"
description = ""
type = ["posts","post"]
tags = [
    "go",
    "golang",
    "hugo",
    "development",
]
date = "2024-07-22"
categories = [
    "Development",
    "golang",
]
series = ["Hugo 101"]
[ author ]
  name = "Hugo Authors"
+++

---
>[*Go Back*](http://localhost:1313/advanced/)
---

---
#### [1. Rest](#rest)

#### [2. SOAP ](#soap)

#### [3. gRPC ](#grpc)
---

API (Application programming interface) — это контракт, который предоставляет программа. «Ко мне можно обращаться так и так, я обязуюсь делать то и это».

### REST

*REST API* — это архитектурный подход, который устанавливает ограничения для API: как они должны быть устроены и какие функции поддерживать. 
- Клиент-серверная модель (client-server model).
- Отсутствие состояния (statelessness).
- Кэширование (cacheability).
- Единообразие интерфейса (uniform interface).
- Многоуровневая система (layered system).

**Конечная точка** – это адрес ресурса, который является пунктом доступа к системе извне.
Клиенты отправляют HTTP-запросы серверу, обращаясь к конечным точкам, которые предоставляют ресурсы.

REST может возвращать данные в любом формате (HTML, XML, JSON), но чаще всего это человеко-читаемый текстовый формат *JSON*.

| **HTTP-метод**| **Назначение**| 
|----------|----------|
| GET| Получить сведения о ресурсе| 
|POST| Создать новый ресурс| 
|PUT| Полностью обновить ресурс|
| PATCH| Частично обновить ресурс|
| DELETE| Удалить ресурс|


### Swagger & OpenApi

**OpenAPI:** Это спецификация, предназначенная для описания RESTful API. Она предоставляет стандартизированный формат для определения структуры API, включая его эндпоинты, параметры и ответы.

**Swagger:** Это набор инструментов, который использует спецификацию OpenAPI для разработки, документирования и тестирования API. 

---

### SOAP

*SOAP*(Simple Object Access Protocol) — это протокол обмена сообщениями между компьютерными системами.

*SOAP API* (Application Programming Interface) — это интерфейс, который позволяет взаимодействовать с удаленными сервисами или приложениями с использованием SOAP протокола. SOAP API основан на использовании XML для описания структуры и содержимого сообщений. Сообщения в SOAP API представляют собой XML-документы, которые содержат данные и вызовы методов для удаленного выполнения операций.

Корректное SOAP-сообщение состоит из нескольких структурных элементов: 

- Envelope - корневой элемент, который определяет сообщение и пространство имен, использованное в документе;

- Header - содержит атрибуты сообщения, например: информация о безопасности или о сетевой маршрутизации;

- Body - содержит сообщение, которым обмениваются приложения;

- Fault - необязательный элемент, который предоставляет информацию об ошибках, которые произошли при обработке сообщений..

![](https://blog.skillfactory.ru/wp-content/uploads/2023/02/soap-2-1670174.png)


*Пример сообщения:*
``` xml
<?xml version="1.0"?>
<soap:Envelope xmlns_soap="http://www.w3.org/2003/05/soap-envelope/" soap_encodingStyle="http://www.w3.org/2003/05/soap-encoding"> 
<soap:Body> <m:GetPrice xmlns_m="https://online-shop.ru/prices"> <m:Item>Dell Vostro 3515-5371</m:Item> 
</m:GetPrice> </soap:Body> 
</soap:Envelope>
```

#### Отличия

| SOAP| REST| 
|----------|----------|
| SOAP является протоколом сообщений| REST является архитектурным стилем| 
|XML| Различные форматы, чаще всего JSON.| 
|Может использовать разные транспортные протоколы, но чаще всего использует HTTP, SMTP, TCP и т. д.| Использует преимущественно HTTP.|

---

### gRPC

*RPC* — это форма взаимодействия клиент-сервер, в которой используется вызов функции, а не обычный вызов HTTP. Идея в том, что мы можем вызвать и выполнить функцию где-то на удаленной системе, как если бы это была локальная функция.

Клиент делает запрос на выполнение процедуры на удаленном сервере.
Параметры процедуры передаются по сети на сторону сервера. Процедура выполняется на сервере и, наконец, результаты передаются обратно клиенту.

gRPC воспроизводит этот архитектурный стиль взаимодействия клиент-сервер через вызовы функций.


![](https://wiki.merionet.ru/images/chto-takoe-grpc-i-protobuf/1.png)

Он основан на протоколе HTTP/2 и использует бинарный формат сообщений Protocol Buffers вместо JSON, что обеспечивает более эффективную передачу данных

**HTTP/2 **- это новая версия протокола HTTP, разработанная для повышения производительности и эффективности передачи данных в современных веб-приложениях. Основные особенности HTTP/2:
**Бинарный формат**
HTTP/2 использует бинарный формат вместо текстового, что позволяет более эффективно кодировать и передавать данные.

**Мультиплексирование**
HTTP/2 поддерживает одновременную передачу нескольких запросов и ответов по одному TCP-соединению.

**Сжатие заголовков**
HTTP/2 использует алгоритм сжатия заголовков, что уменьшает объем передаваемых данных.

**gRPC** - это фреймворк для построения высокопроизводительных распределенных систем, основанный на протоколах Protobuf и HTTP/2. Вот как работает архитектура gRPC:

**Определение контракта сервиса**
Разработчики определяют интерфейс сервиса с помощью языка описания Protobuf.
Этот контракт описывает методы сервиса, их входные и выходные параметры.
**Генерация кода**
Из Protobuf-описания автоматически генерируется код клиента и сервера на различных языках программирования.
Это упрощает разработку и обеспечивает совместимость между компонентами.
**Взаимодействие по HTTP/2**
gRPC использует протокол HTTP/2 в качестве транспортного уровня.
Это обеспечивает высокую производительность, эффективность и поддержку потоковой передачи данных.
**Использование Protobuf для сериализации**
Все данные, передаваемые между клиентом и сервером, сериализуются и десериализуются с помощью Protobuf.
Это гарантирует компактность и эффективность передачи данных.

**В gRPC, proto-контракт** - это определение интерфейса сервиса, написанное на языке описания Protocol Buffers (protobuf). Он описывает методы сервиса, их входные и выходные параметры.
Основные особенности proto-контракта в gRPC:

**Определение сервиса** - в proto-файле определяется сервис с методами, которые могут быть удаленно вызваны. Например:

``` proto
service HelloService {
  rpc SayHello (HelloRequest) returns (HelloResponse);
}

message HelloRequest {
  string name = 1;
}

message HelloResponse {
  string message = 1;
}
```

**Описание сообщений** - структура входных и выходных параметров методов описывается в виде сообщений protobuf. Сообщения имеют строго определенные поля с типами.

**Генерация кода** - из proto-файла автоматически генерируется код клиента и сервера на различных языках программирования. Это упрощает разработку и обеспечивает совместимость между компонентами.

**Промежуточный контракт** - Proto-файл служит промежуточным контрактом между клиентом и сервером. Клиент и сервер должны иметь один и тот же proto-файл для корректного взаимодействия.

---